<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="style.css">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">
  <title>Transport Tool</title>
  <script src="appscripts/authorization.js" defer></script>
  <script src="appscripts/Location.js" defer></script>
  <script src="appscripts/RecurringFare.js" defer></script>
  <script src="appscripts/SingleFare.js" defer></script>
  <script src="appscripts/mapframe.js" defer></script>
  <script src="appscripts/calendar.js" defer></script>
  <script src="appscripts/buttons.js" defer></script>
</head>

<body>
	<h1>Transport Tool</h1>
	<nav>
	<a class="active" href="index.html">concessionpass</a> / 
	<a href="blog.html">blog</a> / 
	<a href="tips.html">tips</a>
	</nav>
	
	<h2>concession pass calculator</h2>
	<div class="blogpost">
		<h3>How does this work?</h3>
		<p>
			In short, this tool should help you calculate whether your fares add
			up to $128 in a month (30 days, actually). And that decides whether
			you should apply for a concession pass.
			
			You can input your own fare. The "calculate fare" portion doesn't
			work because it requires an API key. I'll see how I can work around it.
		</p>
	</div>

	<section>
		<h2>Transport Directions</h2>
		<p>In this section, you can calculate the public transport fare between
		two addresses.</p>
		
		
		<div class="flex-container">
			<div>
				<h3>Address 1 (Start)</h3>
				<input type="text" id="searchQuery_1" placeholder="Enter postal code">
				<button id="searchButton_1">Search</button>
				<pre id="response_1"></pre>
			</div>
			<div>==></div>
			<div>
				<h3>Address 2 (End)</h3>
				<input type="text" id="searchQuery_2" placeholder="Enter postal code">
				<button id="searchButton_2">Search</button>
				<pre id="response_2"></pre>
			</div>
		</div>
		
		<iframe 
			id = "mapFrame"
			src="https://www.onemap.gov.sg/amm/amm.html?mapStyle=Default&zoomLevel=15&popupWidth=200" 
			scrolling="no" 
			height=300px
			width=100%
			frameborder="0" 
			allowfullscreen="allowfullscreen">
		</iframe>
				
		<!-- TODO Just let the person fill in their own fare.-->
		<h3>Calculate fare of the trip</h3>
		<small>
			Currently takes the first suggested public transport trip based on
			OneMap's pathfinding algorithm. This requires an API Key which is not provided
			right now.
			<br>
			You can also input your own fare amount
			in the next section. Feel free to use another tool, like the
			<a href="https://www.lta.gov.sg/content/ltagov/en/map/fare-calculator.html"
			target="_blank">LTA fare calculator</a>.
		</small>
		<br>
		<button id="calculateFareButton" disabled>Calculate Fare!</button>
		<br>
		<pre><b>Fare:</b> $<span id="fareResult">0</span></pre>

	</section>

	
	<section style="background-color:#FFA566; box-shadow: 10px 10px #000">
		<h2>Add fare to calendar</h2>
		<p>Here, you take the fare you calculated above and plot it into the calendar.
		It can be a recurring trip (weekly), or an ad-hoc (one-time) trip.</p>
		
		<b>Fare:</b> $ <input type="number" id="fareInput" step="0.01" min="0" placeholder="0.00" />

		<button id="getFareFromAboveButton">Input fare from above</button>
		<br>
		
		<h3>Recurring Trips</h3>
		<p>
			If this is a recurring trip, you can check the boxes below on the days
			it occurs. <i>E.g.</i> if you're working from Monday to Friday in the office,
			you probably take this trip twice a day. So, check the boxes from Monday
			to Friday, and then press "Add recurring trips" two times.
			Once you have checked the boxes, click the button below to add it to your trips.
		</p>
		
		<div class="flex-container">
		<label class="dailyCheckbox"><input type="checkbox" id="checkDay0"> Sun</label>
		<label class="dailyCheckbox"><input type="checkbox" id="checkDay1"> Mon</label>
		<label class="dailyCheckbox"><input type="checkbox" id="checkDay2"> Tue</label>
		<label class="dailyCheckbox"><input type="checkbox" id="checkDay3"> Wed</label>
		<label class="dailyCheckbox"><input type="checkbox" id="checkDay4"> Thu</label>
		<label class="dailyCheckbox"><input type="checkbox" id="checkDay5"> Fri</label>
		<label class="dailyCheckbox"><input type="checkbox" id="checkDay6"> Sat</label>
		</div>
		<br>
		<button id = "daysOfWeekCheckboxButton">Add recurring trips</button>
		
		<pre><b>Recurring trips:</b><br><span id="dailyFareTable"></span></pre>
		<button id = "resetRecurringTripsButton">Reset all to $0</button>
		
		<h3>Ad-hoc trips</h3>
		<p>
			If you expect to have a trip in the upcoming month that isn't recurring
			(<i>e.g.</i> a one-time dinner appointment), use this section to
			select a date and then press "add single trip".
		</p>
		
		<!-- Limits will be imposed dynamically in javascript -->
		<input type="date" id="dateInput" />
		<button id = "adHocDateButton">Add single trip</button>
		
		<pre><b>Single Trips:</b><br><span id="singleFareTable"></span></pre>
		
		<button id = "resetSingleTripsButton">Reset Single Trips</button>
	
	</section>
	
	<section>
	<h2>Your total fares this month</h2>
		<small>Note calendar starts from today.</small>
		<table id="calendar">
			<thead>
				<tr>
					<th colspan="7" id="calendarHead">Month</th>
				</tr>
				<tr>
					<th>S</th>
					<th>M</th>
					<th>T</th>
					<th>W</th>
					<th>T</th>
					<th>F</th>
					<th>S</th>
				</tr>
			</thead>
			<tbody id="calendarBody">
				<!-- 6 rows for the dates -->
				<tr>
					<td id="day1"></td>
					<td id="day2"></td>
					<td id="day3"></td>
					<td id="day4"></td>
					<td id="day5"></td>
					<td id="day6"></td>
					<td id="day7"></td>
				</tr>
				<tr>
					<td id="day8"></td>
					<td id="day9"></td>
					<td id="day10"></td>
					<td id="day11"></td>
					<td id="day12"></td>
					<td id="day13"></td>
					<td id="day14"></td>
				</tr>
				<tr>
					<td id="day15"></td>
					<td id="day16"></td>
					<td id="day17"></td>
					<td id="day18"></td>
					<td id="day19"></td>
					<td id="day20"></td>
					<td id="day21"></td>
				</tr>
				<tr>
					<td id="day22"></td>
					<td id="day23"></td>
					<td id="day24"></td>
					<td id="day25"></td>
					<td id="day26"></td>
					<td id="day27"></td>
					<td id="day28"></td>
				</tr>
				<tr>
					<td id="day29"></td>
					<td id="day30"></td>
					<td id="day31"></td>
					<td id="day32"></td>
					<td id="day33"></td>
					<td id="day34"></td>
					<td id="day35"></td>
				</tr>
				<tr>
					<td id="day36"></td>
					<td id="day37"></td>
					<td id="day38"></td>
					<td id="day39"></td>
					<td id="day40"></td>
					<td id="day41"></td>
					<td id="day42"></td>
				</tr>
			</tbody>
		</table>
		
		<button id="calculateTotalFareButton">Calculate Total Expenditure</button>
		<br>
		<b>Total fare for the next 30 days starting today:</b>
		<pre>$<span id="totalFareResult">0</span></pre>
	</section>
	
	<!-- Footer -->
	<footer>
		<hr>
		<a href="blog.html">blog</a>
		<br>
		<small>Using OneMap API</small>
		<img src="https://www.onemap.gov.sg/web-assets/images/logo/om_logo.png" style="height:20px;width:20px;"/>&nbsp;<a href="https://www.onemap.gov.sg/" target="_blank" rel="noopener noreferrer">OneMap</a>&nbsp;&copy;&nbsp;contributors&nbsp;&#124;&nbsp;<a href="https://www.sla.gov.sg/" target="_blank" rel="noopener noreferrer">Singapore Land Authority</a>
		<br>
		By zhan hong (<a href="mailto:choongzhanhong@gmail.com">contact</a>)
	</footer>

</body>
</html>
